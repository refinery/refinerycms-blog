<%= form_with(model: [refinery, :blog_admin, @post], local: true) do |f| -%>
  <%= render "/refinery/admin/error_messages",
             object: f.object,
             include_object_name: true %>

  <%= render '/refinery/admin/locale_picker',
             current_locale: Mobility.locale %>

  <div class='field' >
    <%= f.label :title -%>
    <%= f.text_field :title, class: 'larger widest' -%>
  </div >
  <div class='field' >
    <span class='label_with_help' >
      <%= f.label :user_id, t('.author') %>
      <%= refinery_help_tag t('.author_help') %>
      <br />
      <% if @authors.present? %>
        <%= f.collection_select :user_id, @authors, :id, :username %>
      <% else %>
        <%= f.text_field :username, id: :post_user_id, :class => "widest" %>
      <% end %>
    </span >
  </div >
  <%= render '/refinery/blog/admin/tabbed_fields', f: f, tabs: Refinery::Blog.tabs, object: @post %>

  <div id="draft_field" >
    <p >
      <%= f.check_box :draft %>
      <%= f.label :draft, t('.save_as_draft'),
                  :class => 'stripped' %>
    </p >
  </div >

  <%= render "/refinery/admin/form_actions",
             f: f,
             continue_editing: true,
             delete_title: t('delete', scope: 'refinery.blog.admin.posts.post'),
             before_delete_button: (link_to(t('delete_translation', scope: 'refinery.blog.admin.posts.post'),
                                            refinery.delete_translation_blog_admin_post_path(@post, locale_to_delete: Mobility.locale),
                                            method: :post,
                                            data: {
                                              confirm: t('delete_translation_confirmation', scope: 'refinery.blog.admin.posts.post')
                                            },
                                            class: "button confirm-delete") if Refinery::I18n.frontend_locales.many? && @post.translations.size > 1)
  %>
<% end -%>

<% content_for :stylesheets, stylesheet_link_tag('refinery/blog/backend') %>
<% content_for :javascripts, javascript_include_tag('refinery/blog/backend') %>
<%= render 'refinery/shared/admin/autocomplete',
           dom_id: '#post_tag_list',
           url: refinery.tags_blog_admin_posts_url %>

